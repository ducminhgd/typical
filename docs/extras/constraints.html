
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>typical Constraints &#8212; typical 2.0.0b5 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="canonical" href="https://seandstewart.github.io/typical/extras/constraints.html" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="typical JSON Schema" href="schema.html" />
    <link rel="prev" title="typical Settings" href="settings.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
    <link rel="apple-touch-icon" href="../_static/favicon/apple-touch-icon.png" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/logo.png" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">A simple, fast, & correct data-validation library.</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=seandstewart&repo=typical&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





    

<p>
<a class="badge" href="https://travis-ci.org/seandstewart/typical">
    <img
        alt="https://secure.travis-ci.org/seandstewart/typical.svg?branch=master"
        src="https://secure.travis-ci.org/seandstewart/typical.svg?branch=master"
    />
</a>
</p>




    

<p>
<a class="badge" href="https://codecov.io/github/seandstewart/typical">
    <img
    alt="https://codecov.io/github/seandstewart/typical/coverage.svg?branch=master"
    src="https://codecov.io/github/seandstewart/typical/coverage.svg?branch=master"
    />
</a>
</p>
<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../why.html">Why <code class="docutils literal notranslate"><span class="pre">typical</span></code>?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html"><code class="docutils literal notranslate"><span class="pre">typical</span></code> Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/index.html"><code class="docutils literal notranslate"><span class="pre">typical</span></code> Usage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html"><code class="docutils literal notranslate"><span class="pre">typical</span></code> Extras</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="types.html"><code class="docutils literal notranslate"><span class="pre">typical</span></code> Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="settings.html"><code class="docutils literal notranslate"><span class="pre">typical</span></code> Settings</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">typical</span></code> Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="schema.html"><code class="docutils literal notranslate"><span class="pre">typical</span></code> JSON Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="checks.html"><code class="docutils literal notranslate"><span class="pre">typical</span></code> Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities.html"><code class="docutils literal notranslate"><span class="pre">typical</span></code> Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Low-Level API</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html"><code class="docutils literal notranslate"><span class="pre">typical</span></code> Extras</a><ul>
      <li>Previous: <a href="settings.html" title="previous chapter"><code class="docutils literal notranslate"><span class="pre">typical</span></code> Settings</a></li>
      <li>Next: <a href="schema.html" title="next chapter"><code class="docutils literal notranslate"><span class="pre">typical</span></code> JSON Schema</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="settings.html" title="Previous document"><code class="docutils literal notranslate"><span class="pre">typical</span></code> Settings</a>
        </li>
        <li>
          <a href="schema.html" title="Next document"><code class="docutils literal notranslate"><span class="pre">typical</span></code> JSON Schema</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <div class="section" id="typical-constraints">
<h1><code class="docutils literal notranslate"><span class="pre">typical</span></code> Constraints<a class="headerlink" href="#typical-constraints" title="Permalink to this headline">¶</a></h1>
<p>Constraints allow you to define “restricted” types for your data. This is similar to
what you may see when defining your fields in JSON schema. In fact, we can (and do) use
constraints to generate extended JSON schema type definitions.</p>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>You can define your “constrained type” by using the <code class="docutils literal notranslate"><span class="pre">typic.constrained</span></code> decorator on
a sub-class of the builtin Python type you want to restrict. This can be quite useful
for restricting the type of data a callable is allowed to receive:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">typic</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@typic.constrained</span><span class="p">(</span><span class="n">ge</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">le</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">TinyInt</span><span class="p">(</span><span class="nb">int</span><span class="p">):</span>
<span class="gp">... </span>    <span class="sd">&quot;&quot;&quot;An integer type restrcted to only 0-1.&quot;&quot;&quot;</span>
<span class="gp">... </span>    <span class="o">...</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@typic.al</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">switch</span><span class="p">(</span><span class="n">val</span><span class="p">:</span> <span class="n">TinyInt</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="s2">&quot;on!&quot;</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="s2">&quot;off!&quot;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">switch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">&#39;on!&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">switch</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&#39;off!&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">switch</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">typic.constraints.error.ConstraintValueError</span>: <span class="n">Given value &lt;2&gt; fails constraints: (type=int, ge=0, le=1)</span>
</pre></div>
</div>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="typic.constrained">
<code class="sig-prename descclassname">&#64;</code><code class="sig-prename descclassname">typic.</code><code class="sig-name descname">constrained</code><span class="sig-paren">(</span><em class="sig-param">_klass=None</em>, <em class="sig-param">*</em>, <em class="sig-param">values=None</em>, <em class="sig-param">**constraints</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/typic/api.html#constrained"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#typic.constrained" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper to indicate a ‘constrained’ type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>values</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.8)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Type</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.8)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Type</span></code></a>, …], <code class="docutils literal notranslate"><span class="pre">None</span></code>]) – For container-types, you can pass in other constraints for the values to be
validated against. Can be a single constraint for all values or a tuple of
constraints to choose from.</p></li>
<li><p><strong>**constraints</strong> – The restrictions to apply to values being cast as the decorated type.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">typic</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@typic</span><span class="o">.</span><span class="n">constrained</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">ShortStr</span><span class="p">(</span><span class="nb">str</span><span class="p">):</span>
<span class="gp">... </span>    <span class="sd">&#39;&#39;&#39;A short string.&#39;&#39;&#39;</span>
<span class="gp">... </span>    <span class="o">...</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ShortStr</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="go">&#39;foo&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ShortStr</span><span class="p">(</span><span class="s1">&#39;waytoomanycharacters&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">typic.constraints.error.ConstraintValueError</span>: <span class="n">Given value &lt;&#39;waytoomanycharacters&#39;&gt; fails constraints: (type=str, max_length=10)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@typic</span><span class="o">.</span><span class="n">constrained</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="n">ShortStr</span><span class="p">,</span> <span class="n">max_items</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">SmallMap</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
<span class="gp">... </span>    <span class="sd">&#39;&#39;&#39;A small map that only allows short strings.&#39;&#39;&#39;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">typic</span><span class="o">.</span><span class="n">schema</span><span class="p">(</span><span class="n">SmallMap</span><span class="p">,</span> <span class="n">primitive</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="go">{</span>
<span class="go">  &quot;type&quot;: &quot;object&quot;,</span>
<span class="go">  &quot;title&quot;: &quot;SmallMap&quot;,</span>
<span class="go">  &quot;description&quot;: &quot;A small map that only allows short strings.&quot;,</span>
<span class="go">  &quot;additionalProperties&quot;: {</span>
<span class="go">    &quot;type&quot;: &quot;string&quot;,</span>
<span class="go">    &quot;maxLength&quot;: 10</span>
<span class="go">  },</span>
<span class="go">  &quot;maxProperties&quot;: 2</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../api/constraints.html#module-typic.constraints.array" title="typic.constraints.array"><code class="xref py py-mod docutils literal notranslate"><span class="pre">typic.constraints.array</span></code></a>, <a class="reference internal" href="../api/constraints.html#module-typic.constraints.common" title="typic.constraints.common"><code class="xref py py-mod docutils literal notranslate"><span class="pre">typic.constraints.common</span></code></a>, <a class="reference internal" href="../api/constraints.html#module-typic.constraints.error" title="typic.constraints.error"><code class="xref py py-mod docutils literal notranslate"><span class="pre">typic.constraints.error</span></code></a>, <a class="reference internal" href="../api/constraints.html#module-typic.constraints.mapping" title="typic.constraints.mapping"><code class="xref py py-mod docutils literal notranslate"><span class="pre">typic.constraints.mapping</span></code></a>, <a class="reference internal" href="../api/constraints.html#module-typic.constraints.number" title="typic.constraints.number"><code class="xref py py-mod docutils literal notranslate"><span class="pre">typic.constraints.number</span></code></a>, <a class="reference internal" href="../api/constraints.html#module-typic.constraints.text" title="typic.constraints.text"><code class="xref py py-mod docutils literal notranslate"><span class="pre">typic.constraints.text</span></code></a></p>
</div>
</dd></dl>

</div>
</div>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="settings.html" title="Previous document"><code class="docutils literal notranslate"><span class="pre">typical</span></code> Settings</a>
        </li>
        <li>
          <a href="schema.html" title="Next document"><code class="docutils literal notranslate"><span class="pre">typical</span></code> JSON Schema</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;Copyright 2019 Sean Stewart.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/extras/constraints.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>